<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Run tree-sitter queries on TOML tree-sitter trees — ts_tree_query.ts_tree_toml • tstoml</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run tree-sitter queries on TOML tree-sitter trees — ts_tree_query.ts_tree_toml"><meta name="description" content="Use
tree-sitter's query language to find nodes in a tree-sitter tree."><meta property="og:description" content="Use
tree-sitter's query language to find nodes in a tree-sitter tree."></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tstoml</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gaborcsardi/tstoml/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Run tree-sitter queries on TOML tree-sitter trees</h1>
      <small class="dont-index">Source: <a href="https://github.com/gaborcsardi/tstoml/blob/main/R/ts-tree-query.R" class="external-link"><code>R/ts-tree-query.R</code></a></small>
      <div class="d-none name"><code>ts_tree_query.ts_tree_toml.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Use <a href="https://tree-sitter.github.io/tree-sitter/" class="external-link">
tree-sitter's query language</a> to find nodes in a tree-sitter tree.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'ts_tree_toml'</span></span>
<span><span class="fu"><a href="https://gaborcsardi.github.io/ts/reference/ts_tree_query.html" class="external-link">ts_tree_query</a></span><span class="op">(</span><span class="va">tree</span>, <span class="va">query</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-tree">tree<a class="anchor" aria-label="anchor" href="#arg-tree"></a></dt>
<dd><p>A <code>ts_tree</code> object.</p></dd>


<dt id="arg-query">query<a class="anchor" aria-label="anchor" href="#arg-query"></a></dt>
<dd><p>Character string, the tree-sitter query to run.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with entries <code>patterns</code> and <code>matched_captures</code>.
</p><p><code>patterns</code> contains information about all patterns in the queries and
it is a data frame with columns: <code>id</code>, <code>name</code>, <code>pattern</code>, <code>match_count</code>.
</p><p><code>matched_captures</code> contains information about all matches, and it has
columns <code>id</code>, <code>pattern</code>, <code>match</code>, <code>start_byte</code>, <code>end_byte</code>, <code>start_row</code>,
<code>start_column</code>, <code>end_row</code>, <code>end_column</code>, <code>name</code>, <code>code</code>.
</p><p>The <code>pattern</code> column of <code>matched_captured</code> refers to the <code>id</code> column of
<code>patterns</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>You probably need to know some details about the specific tree-sitter
parser you are using, to write effective queries. See the documentation
of the parser package you are using for details about the node types
and the query language support. See links below.

<script>
function openCity(evt, language) {
  var currentTab = evt.srcElement.parentElement.parentElement;
  var i, x, tablinks;
  x = currentTab.getElementsByClassName("ts-package");
  for (i = 0; i < x.length; i++) {
    x[i].style.display = "none";
  }
  tablinks = currentTab.getElementsByClassName("tablink");
  for (i = 0; i < x.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" w3-active", "");
  }
  currentTab.getElementsByClassName("ts-package-" + language)[0].style.display = "block";
  evt.srcElement.className += " w3-active";
}
</script><style>
.w3-container:after,
.w3-container:before,
.w3-panel:after,
.w3-panel:before,
.w3-row:after,
.w3-row:before,
.w3-row-padding:after,
.w3-row-padding:before,
.w3-cell-row:before,
.w3-cell-row:after,
.w3-clear:after,
.w3-clear:before,
.w3-bar:before,
.w3-bar:after {
  content:"";
  display: table;
  clear: both
}.w3-container,
.w3-panel {
  padding: 0.01em 16px
}.w3-panel {
  margin-top: 16px;
  margin-bottom: 16px
}.w3-bar {
  width: 100%;
  overflow: hidden
}.w3-center .w3-bar {
  display: inline-block;
  width: auto
}.w3-bar .w3-bar-item {
  padding: 8px 16px;
  float: left;
  width: auto;
  border: none;
  display: block;
  outline: 0
}.w3-bar .w3-button {
  white-space: normal;
  border: 1px solid;
}.w3-block {
  display: block;
  width: 100%
}.w3-btn,
.w3-button {
  border: none;
  display: inline-block;
  padding: 8px 16px;
  vertical-align: middle;
  overflow: hidden;
  text-decoration: none;
  color: inherit;
  background-color: inherit;
  text-align: center;
  cursor: pointer;
  white-space: nowrap
}.w3-btn,
.w3-button{
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none
}.w3-bar .w3-button {
  white-space: normal
}.w3-button:hover {
  color: #000!important;
  background-color: #ccc!important
}.w3-active,
.w3-hover-active:hover {
  background-color: #aaa;
  color: #000;
}.w3-border-0 {
  border: 0!important
}.w3-border {
  border: 1px solid #ccc!important;
  margin-bottom: 10px;
}.w3-border-top {
  border-top: 1px solid #ccc!important
}.w3-border-bottom {
  border-bottom: 1px solid #ccc!important
}.w3-border-left {
  border-left: 1px solid #ccc!important
}.w3-border-right{
  border-right: 1px solid #ccc!important
}/* undo the gradient in tidytemplate, but add it to the whole tab */
.ts-package {
  background-image: linear-gradient(-160deg, #f8f8f8 0, #f1f1f1 100%);
  margin-bottom: 10px;
}
.ts-package pre, code {
  background-image: none;
  background-color: #00000000;
}
</style></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Select all numbers in a TOML document ------------------------------------</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/gaborcsardi/ts" class="external-link">ts</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">toml</span> <span class="op">&lt;-</span> <span class="fu">tstoml</span><span class="fu">::</span><span class="fu"><a href="ts_parse_toml.html">ts_parse_toml</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">'a = 1\nb = [10.0, 20, 30]\nc = { c1 = true, c2 = 100 }'</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">toml</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://gaborcsardi.github.io/ts/reference/ts_tree_query.html" class="external-link">ts_tree_query</a></span><span class="op">(</span><span class="st">"[(float) (integer)] @number"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $patterns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A data frame: 1 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      id name  pattern                         match_count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1 <span style="color: #BB0000;">NA</span>    <span style="color: #949494;">"</span>[(float) (integer)] @number\n<span style="color: #949494;">"</span>           5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $captures</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A data frame: 1 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      id name  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1 number</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $matched_captures</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A data frame: 5 × 12</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      id pattern match type   start_byte end_byte start_row start_column</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1       1     1 integ…          4        5         0            4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     1       1     2 float          11       15         1            5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     1       1     3 integ…         17       19         1           11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     1       1     4 integ…         21       23         1           15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>     1       1     5 integ…         47       50         2           22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 4 more variables: end_row &lt;int&gt;, end_column &lt;int&gt;, name &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   code &lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

  </div></footer></body></html>

